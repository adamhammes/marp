<!DOCTYPE html>
<html>
  <head>
    <script>
      window.addEventListener("DOMContentLoaded", () => {
        console.log("here");
        const body = document.querySelector("body");
        const stylesContainer = document.querySelector("#js-injected-styles");

        const socket = new WebSocket("ws://127.0.0.1:3012");
        socket.onopen = _ => {
          socket.send("Give me markdown or give me death!");
        };
        socket.onmessage = ev => {
          const data = JSON.parse(ev.data);

          if (data.content) {
            body.innerHTML = data.content;
          }

          if (data.stylesheet) {
            stylesContainer.innerHTML = data.stylesheet;
          }
        };
      });
    </script>
    <style id="js-injected-styles"></style>
  </head>
  <body></body>
</html>
